/* Mermaid 包装器样式 - 确保完全透明 */
.mermaid-wrapper {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 1rem 0 !important;
}

/* Mermaid 图表容器样式 - 无背景透明显示 */
.mermaid-container {
  margin: 0;
  padding: 0;
  background: transparent;
  border: none;
  overflow-x: auto;
}

/* 图表 SVG 样式 */
.mermaid-container svg {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 0 auto;
}

/* 错误状态样式 */
.mermaid-error {
  padding: 1rem;
  border-radius: 0.375rem;
  background-color: #fef2f2;
  border: 1px solid #fecaca;
  color: #dc2626;
}

.mermaid-error .error-message {
  margin-bottom: 0.75rem;
  font-size: 0.875rem;
}

.mermaid-error .error-details {
  margin-top: 0.75rem;
}

.mermaid-error .error-details summary {
  cursor: pointer;
  font-weight: 500;
  color: #7f1d1d;
  margin-bottom: 0.5rem;
}

.mermaid-error .error-details summary:hover {
  color: #991b1b;
}

.mermaid-error pre {
  background-color: #f3f4f6;
  padding: 0.75rem;
  border-radius: 0.25rem;
  overflow-x: auto;
  font-size: 0.75rem;
  color: #374151;
  margin-top: 0.5rem;
}

.mermaid-error code {
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace;
}

/* 确保图表透明显示 */
.mermaid-container {
  background: transparent !important;
  border: none !important;
}

.mermaid-container svg {
  background: transparent !important;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .mermaid-container {
    margin: 0.75rem 0;
    padding: 0.75rem;
  }
  
  .mermaid-container svg {
    font-size: 12px;
  }
}

/* 加载动画 */
@keyframes mermaid-loading {
  0% {
    opacity: 0.5;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.5;
  }
}

.mermaid-loading {
  animation: mermaid-loading 1.5s ease-in-out infinite;
}

/* 图表特定样式优化 - 确保线条可见 */
.mermaid-container .node rect,
.mermaid-container .node circle,
.mermaid-container .node ellipse,
.mermaid-container .node polygon {
  stroke-width: 2px;
  stroke: #333333 !important;
}

.mermaid-container .edgePath path {
  stroke-width: 2px;
  stroke: #333333 !important;
  fill: none;
}

/* 确保所有连接线都可见 */
.mermaid-container .flowchart-link,
.mermaid-container .messageLine0,
.mermaid-container .messageLine1,
.mermaid-container .messageLine2,
.mermaid-container .messageLine3 {
  stroke: #333333 !important;
  stroke-width: 2px !important;
  fill: none !important;
}

/* 确保箭头可见 */
.mermaid-container .arrowheadPath {
  fill: #333333 !important;
  stroke: #333333 !important;
}

/* 确保节点边框可见 */
.mermaid-container .node rect,
.mermaid-container .node circle,
.mermaid-container .node ellipse,
.mermaid-container .node polygon,
.mermaid-container .actor,
.mermaid-container .actorBox {
  stroke: #333333 !important;
  stroke-width: 2px !important;
}

.mermaid-container .edgeLabel {
  background-color: transparent;
  border-radius: 3px;
  padding: 2px 4px;
  font-size: 11px;
}

/* 确保文本可读性 */
.mermaid-container text {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  font-size: 14px;
}

/* 流程图节点样式 */
.mermaid-container .flowchart-link {
  stroke: #333;
  fill: none;
}

.mermaid-container .flowchart-node {
  fill: #f8f9fa;
  stroke: #333;
  stroke-width: 1px;
}

/* 序列图样式 */
.mermaid-container .actor {
  fill: #eee;
  stroke: #666;
}

.mermaid-container .messageLine0,
.mermaid-container .messageLine1 {
  stroke: #333;
  stroke-width: 1.5px;
}

/* 甘特图样式 */
.mermaid-container .section0,
.mermaid-container .section1,
.mermaid-container .section2,
.mermaid-container .section3 {
  fill: #8dd3c7;
}

.mermaid-container .task0,
.mermaid-container .task1,
.mermaid-container .task2,
.mermaid-container .task3 {
  fill: #ffffb3;
  stroke: #666;
}

/* Git 图样式 */
.mermaid-container .commit-id,
.mermaid-container .commit-msg,
.mermaid-container .branch-label {
  fill: #333;
  font-size: 10px;
}

/* 类图样式 */
.mermaid-container .classBox {
  fill: #fff;
  stroke: #333;
  stroke-width: 1px;
}

.mermaid-container .classTitle {
  font-weight: bold;
  font-size: 12px;
}

/* 状态图样式 */
.mermaid-container .state-start circle,
.mermaid-container .state-end circle {
  fill: #333;
}

.mermaid-container .state-note {
  fill: #fff2cc;
  stroke: #d6b656;
}

/* 实体关系图样式 */
.mermaid-container .er.entityBox {
  fill: #fff;
  stroke: #333;
  stroke-width: 1px;
}

.mermaid-container .er.attributeBoxEven,
.mermaid-container .er.attributeBoxOdd {
  fill: #f9f9f9;
  stroke: #333;
  stroke-width: 1px;
}

/* 用户旅程图样式 */
.mermaid-container .journey-section {
  fill: #f4f4f4;
  stroke: #333;
}

.mermaid-container .task-type-0,
.mermaid-container .task-type-1,
.mermaid-container .task-type-2,
.mermaid-container .task-type-3 {
  fill: #8dd3c7;
}

/* 饼图样式 */
.mermaid-container .pieCircle {
  stroke: #333;
  stroke-width: 2px;
  opacity: 0.7;
}

.mermaid-container .pieTitleText {
  font-size: 16px;
  font-weight: bold;
  fill: #333;
}

/* 需求图样式 */
.mermaid-container .requirement {
  fill: #f4f4f4;
  stroke: #333;
  stroke-width: 1px;
}

.mermaid-container .requirementText {
  fill: #333;
  font-size: 11px;
}

/* 象限图样式 */
.mermaid-container .quadrant-point {
  fill: #333;
  stroke: #333;
  stroke-width: 1px;
}

.mermaid-container .quadrant-point-text {
  fill: #333;
  font-size: 10px;
}

/* 思维导图样式 */
.mermaid-container .mindmap-node {
  fill: #fff;
  stroke: #333;
  stroke-width: 1px;
}

.mermaid-container .mindmap-node-text {
  fill: #333;
  font-size: 12px;
}

/* 时间线样式 */
.mermaid-container .timeline-section {
  fill: #f4f4f4;
  stroke: #333;
}

.mermaid-container .timeline-event {
  fill: #8dd3c7;
  stroke: #333;
  stroke-width: 1px;
}

/* XY 图表样式 */
.mermaid-container .xyChart .plot-background {
  fill: #f9f9f9;
}

.mermaid-container .xyChart .grid-line {
  stroke: #e0e0e0;
  stroke-width: 1px;
}

.mermaid-container .xyChart .tick-line {
  stroke: #333;
  stroke-width: 1px;
}

/* 桑基图样式 */
.mermaid-container .sankey-link {
  fill: none;
  stroke-opacity: 0.5;
}

.mermaid-container .sankey-node rect {
  fill: #333;
  stroke: #000;
  stroke-width: 1px;
}

.mermaid-container .sankey-node text {
  fill: #333;
  font-size: 12px;
}
